ORG 0000H 
MOV A,#66H

BACK:
JNB P1.4,GEARUP
JNB P1.5,GEARDOWN
MOV P2,A
MOV P3,A
SJMP BACK

CLUTCH:
ACALL ANTICLOCKWISE
ACALL DELAY
ACALL DELAY
ACALL DELAY 
ACALL CLOCKWISE
ACALL DELAY
RET

GEARUP:
ACALL DISPNOU
ACALL CLUTCH
ACALL ANTICLOCKWISE
ACALL DELAY
ACALL DELAY
ACALL DELAY
ACALL CLOCKWISE
ACALL DELAY
RET

GEARDOWN:
ACALL DISPNOD
ACALL CLUTCH
ACALL CLOCKWISE
ACALL DELAY
ACALL DELAY
ACALL ANTICLOCKWISE
ACALL DELAY
RET

ANTICLOCKWISE:
RR A
ACALL DELAY
ACALL DELAY
SJMP BACK

CLOCKWISE:
RL A
ACALL DELAY
ACALL DELAY
SJMP BACK

MOV A,#00H
MOV P0,A				
LOOP: MOV R0,#0AH			
	 MOV DPTR,#300H		
DISPNOU:CLR A				
	   MOVC A,@A+DPTR		
	   MOV P0,A			
	   ACALL DELAY
	   ACALL DELAY
           ACALL DELAY
	   ACALL DELAY
	   INC DPTR
	   DJNZ R0,DISPNOU		
	   SJMP LOOP
	   
DISPNOD:CLR A				
	   MOVC A,@A+DPTR		
	   MOV P0,A			
	   ACALL DELAY
	   ACALL DELAY
           ACALL DELAY
	   ACALL DELAY
	   DEC DPTR
	   DJNZ R0,DISPNOD		
	   SJMP LOOP

ORG 300H
DB 1111110b,0110000b,1101101b,1111001b,0110011b,1011011b,1011111b,1110000b,1111111b,1111011b

DELAY:
MOV R2,#255
H1: MOV R3,#255
H2: DJNZ R3,H2
DJNZ R2,H1
RET
END
